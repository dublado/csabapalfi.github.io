<!doctype html><html lang="en"><head><meta charset="utf-8"><title>&#x1F433; Container Camp London 2015</title><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><style>.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#333;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body a{background-color:transparent;-webkit-text-decoration-skip:objects}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{font-size:2em;margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code{font-family:monospace,monospace;font-size:1em}.markdown-body *{box-sizing:border-box}.markdown-body a{color:#4078c0;text-decoration:none}.markdown-body a:active,.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body h1,.markdown-body h2{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px;font-weight:600}.markdown-body h2{font-size:24px;font-weight:600}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body code{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body p,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body h1,.markdown-body h2{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body ul{padding-left:2em}.markdown-body li+li{margin-top:.25em}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body code{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before{letter-spacing:-.2em;content:"\A0"}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#4078c0;border:1px solid #4078c0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}@media screen and (max-width:480px){.markdown-body{padding:15px}}.markdown-body .heading-anchor{color:inherit}</style><article class="markdown-body"><h1>&#x1F433; Container Camp London 2015</h1><p><a href="https://csabapalfi.github.io">Csaba Palfi</a>, Sep 2015</p><p><strong>Update</strong>: <a href="https://www.youtube.com/playlist?list=PLcHZXHMeDzxUrNpD2Tms-zrZn9etw6JcQ">videos are up here</a>.</p><p>I was at the amazing Container Camp (thanks to <a href="https://www.yld.io/">YLD!</a>) and had a lot of fun. My raw notes are <a href="https://github.com/csabapalfi/container-camp-ldn-2015">on github</a>. See short talk summaries below.</p><ul><li><a href="#bryanc">Bryan Cantrill, Joyent - keynote &#x2605;</a></li><li><a href="#shannon">Shannon Williams, Rancher</a></li><li><a href="#bryanb">Bryan Boreham, Weave - CRDTs &#x2605;</a></li><li><a href="#mandy">Mandy Waite, Google - Kubernetes</a></li><li><a href="#stephane">St&#xE9;phane Graber - LXD</a></li><li><a href="#arjan">Arjan Schaaf - Networking Performance</a></li><li><a href="#alissa">Alissa Bonas - OpenShift, ManageIQ</a></li><li><a href="#miek">Miek Gieben - SkyDNS, dinit &#x2605;</a></li><li><a href="#ben">Ben Hall - Container Security &#x2605;</a></li><li><a href="#diogo">Diogo M&#xF3;nica - Docker Content Trust &#x2605;</a></li><li><a href="#loris">Loris Degioanni - Sysdig &#x2605;</a></li><li><a href="#juan">Juan Batiz-Benet - IPFS, starship &#x2605;</a></li></ul><h2><a class="heading-anchor" name="-a-id-bryanc-a-bryan-cantrill-joyent-keynote-" href="#-a-id-bryanc-a-bryan-cantrill-joyent-keynote-"><a id="bryanc"></a> Bryan Cantrill, Joyent - keynote &#x2605;</a></h2><p>Bryan started the conference with an energetic keynote. Took us from the beginning of chroots to Solaris zones. Then he explained how hardware virtualization still became the de-facto standard and of course we ended up at docker.</p><p>Funny how we&apos;re still replaying history when running containers on VMs though. The future is <strong>containers on bare metal</strong> (container-native infrastructure) with multi-tenant security solved somehow.</p><h2><a class="heading-anchor" name="-a-id-shannon-a-shannon-williams-rancher" href="#-a-id-shannon-a-shannon-williams-rancher"><a id="shannon"></a> Shannon Williams, Rancher</a></h2><p>Shannon talked about <strong>organization adoption</strong> of docker. Most of them just want a container service abstracting away computing resources and orchestration.</p><h2><a class="heading-anchor" name="-a-id-bryanb-a-bryan-boreham-weave-crdts-" href="#-a-id-bryanb-a-bryan-boreham-weave-crdts-"><a id="bryanb"></a> Bryan Boreham, Weave - CRDTs &#x2605;</a></h2><p><strong>Achieving consensus is costly</strong> in distributed systems (network roundtrips, availability). Weave needs to deal with distributed state to handle <strong>IP allocation and service discovery with DNS</strong>. Turns out consensus (and using etcd, consul with raft) is not necessary and <strong>eventual consistency</strong> is enough for their case.</p><p>They use <strong><a href="https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type">CRDTs</a></strong>. Just choose your data-structure well and make sure merging in updates can happen in any order.</p><p>Great talk highlighting how engineering is all about choosing the right trade-offs.</p><h2><a class="heading-anchor" name="-a-id-mandy-a-mandy-waite-google-kubernetes" href="#-a-id-mandy-a-mandy-waite-google-kubernetes"><a id="mandy"></a> Mandy Waite, Google - Kubernetes</a></h2><p>How to make compute resources available to engineers? <strong><a href="http://kubernetes.io/">Kubernetes</a></strong> is Google&apos;s answer. It reached 1.0 in July and let&apos;s you manage apps not machines.</p><p>Kubernetes scheduling and controller components are <strong>not highly-available yet</strong> (in progress). For now you can trust Google Container Engine to run them for you.</p><h2><a class="heading-anchor" name="-a-id-stephane-a-st-phane-graber-lxd" href="#-a-id-stephane-a-st-phane-graber-lxd"><a id="stephane"></a> St&#xE9;phane Graber, LXD</a></h2><p><a href="http://www.ubuntu.com/cloud/tools/lxd">LXD</a> is a wrapper on top of LXC, simple REST API, command line tool. It&apos;s aimed at running full OS/system in container not app containers. Their idea is to run CoreOs or your docker host in an LXD container.</p><h2><a class="heading-anchor" name="-a-id-arjan-a-arjan-schaaf-networking-performance" href="#-a-id-arjan-a-arjan-schaaf-networking-performance"><a id="arjan"></a> Arjan Schaaf - Networking Performance</a></h2><p>Arjan Schaaf from Luminis was measuring <strong>networking performance</strong> of a Kubernetes and CoreOS setup. He compared various Azure and AWS instance types and <strong>Weave, Calico and Flannel</strong> SDNs.</p><p><strong>qperf</strong> is great for quick tests. <strong><a href="https://github.com/esnet/iperf">iperf3</a> is better for long running tests with parallel connections</strong>. Bandwidth, latency and CPU was measured and <strong>Flannel with VXLAN</strong> was the winner. Weave is also working on VXLAN backend which sounds promising.</p><p>Arjan advises against <strong>relying only on synthetic tests</strong>. You should really test using your application, too.</p><h2><a class="heading-anchor" name="-a-id-alissa-a-alissa-bonas-red-hat-openshift" href="#-a-id-alissa-a-alissa-bonas-red-hat-openshift"><a id="alissa"></a>Alissa Bonas, Red Hat - OpenShift</a></h2><p><strong><a href="https://www.openshift.com/">OpenShift 3</a></strong> is built on Kubernetes but also adds some higher level abstractions.</p><p><strong>ManageIQ</strong> collects and correlates information about nodes, pods and the hosts running them. It also allows things like monitoring and security auditing.</p><h2><a class="heading-anchor" name="-a-id-miek-a-miek-gieben-skydns-dinit-" href="#-a-id-miek-a-miek-gieben-skydns-dinit-"><a id="miek"></a> Miek Gieben - SkyDNS, dinit &#x2605;</a></h2><p>Miek showed how Improbable builds it&apos;s reactive - <strong>flexible, ops light and self-healing</strong> - infrastructure. Their stack includes <strong>etcd, SkyDNS, ELK, Prometheus</strong>.</p><p><a href="https://github.com/skynetservices/skydns">SkyDNS</a> can solve discovery, simple load balancing and basic health signals. It also integrates well with Prometheus.</p><p><a href="https://github.com/miekg/dinit">dinit</a> is a super-light init system. Solves the zombie-reaping problem. It can also be used to enable in-container registration.</p><h2><a class="heading-anchor" name="-a-id-ben-a-ben-hall-container-security-" href="#-a-id-ben-a-ben-hall-container-security-"><a id="ben"></a> Ben Hall - Container Security &#x2605;</a></h2><p>Ben told us about lessons learnt while building <a href="http://www.joinscrapbook.com/">scrapbook</a>. It&apos;s training environments allow running arbitrary code by learners in containers.</p><p>Few interesting lessons included <code>--ulimit nproc</code> to disarm fork bombs. I also didn&apos;t know that <code>--net=host</code> allows <strong>shutting down the docker host from a container</strong>. It&apos;s worth watching out for ways how <strong>a container can fill your disks</strong>: logging, fallocate, truncate, dd. Also etc/hosts mounted from host and can be filled with garbage. <strong>Network bandwith</strong> -in and out- is also worth keeping an eye on.</p><p>Tools to help recognizing malicious activity include docker diff, bash_history or sysdig. Also <strong>The Warden</strong> is an upcoming tool from Ocelot Uproar.</p><h2><a class="heading-anchor" name="-a-id-diogo-a-diogo-m-nica-docker-content-trust-" href="#-a-id-diogo-a-diogo-m-nica-docker-content-trust-"><a id="diogo"></a> Diogo M&#xF3;nica - Docker Content Trust &#x2605;</a></h2><p>Diogo is the security lead at docker and talked about new docker 1.8 feature. It&apos;s called content trust and allows <strong>verifying</strong> that an image is <strong>up-to-date</strong> and from the <strong>right publisher</strong>.</p><p>He started by describing <strong><a href="http://theupdateframework.com/">The Update Framework (TUF)</a></strong> for secure software/content updates. It protects against:</p><ul><li>replay attacks (serving stale version) - by requiring expiration</li><li>key compromise - by having a separate, offline root key</li><li>mix and match attacks - by using signed collections</li><li>and more...</li></ul><p><strong><a href="https://github.com/docker/notary">Notary</a></strong> is an opinionated implementation of TUF by Docker Inc.</p><p><strong><a href="https://docs.docker.com/security/trust/content_trust/">Docker Content Trust</a></strong> is built on top of notary. You can give it a go by setting <code>DOCKER_CONTENT_TRUST=1</code> or specifying <code>--disable-content-trust=false</code>. In the future this will be on by default.</p><h2><a class="heading-anchor" name="-a-id-loris-a-loris-degioanni-sysdig-" href="#-a-id-loris-a-loris-degioanni-sysdig-"><a id="loris"></a> Loris Degioanni - Sysdig &#x2605;</a></h2><p><strong>Inspecting containers</strong> resource usage, network and disk stats is not easy. Resources can be monitored with standard command line tools but sometimes difficult to get the right bits of information. <strong>cAdvisor</strong> is easy to install but doesn&apos;t have too many metrics. The <strong>docker stats API</strong> is a bit richer but sometimes even that is not enough.</p><p><strong><a href="http://www.sysdig.org/">Sysdig</a></strong> requires a <strong>kernel module</strong> but it&apos;s super powerful. Metrics can be saved to a <strong>trace file</strong> and processed later (just like tcpdump). It also has a nice <strong>htop-like interface</strong>. You have to see a demo.</p><h2><a class="heading-anchor" name="-a-id-juan-a-juan-batiz-benet-ipfs-starship-" href="#-a-id-juan-a-juan-batiz-benet-ipfs-starship-"><a id="juan"></a>Juan Batiz-Benet - IPFS, starship &#x2605;</a></h2><p>Juan from <a href="http://ipn.io/">Protocol Labs</a> talked about how centralized infrastructure is less than ideal. Companies <strong>rely on docker hub, github</strong> and we all saw what a <strong>DDoS</strong> attack can do. We&apos;re also <strong>wasting bandwidth</strong> by downloading the same content from these central sources.</p><p><strong><a href="https://ipfs.io/">IPFS</a></strong> is about switching the web to a peer-to-peer protocol. It borrows some ideas from git and bittorrent and removes the need for a central server altogether. See their <a href="https://ipfs.io/ipfs/QmNhFJjGcMPqpuYfxL62VVB9528NXqDNMFXiqN5bgFYiZ1/its-time-for-the-permanent-web.html">blogpost here</a>.</p><p><strong>starship</strong> is a solution to make pulling and pushing images faster and more reliable by using IPFS.</p><p><img src="https://ga-beacon.appspot.com/UA-29212656-1/container-camp-ldn-2015?pixel" alt=""></p></article></body></html>